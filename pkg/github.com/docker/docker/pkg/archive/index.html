<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="theme-color" content="#375EAB">

  <title>archive - The Go Programming Language</title>

<link type="text/css" rel="stylesheet" href="../../../../../../lib/godoc/style.css">

<link rel="stylesheet" href="../../../../../../lib/godoc/jquery.treeview.css">
<script type="text/javascript">window.initFuncs = [];</script>
</head>
<body>

<div id='lowframe' style="position: fixed; bottom: 0; left: 0; height: 0; width: 100%; border-top: thin solid grey; background-color: white; overflow: auto;">
...
</div><!-- #lowframe -->

<div id="topbar" class="wide"><div class="container">
<div class="top-heading" id="heading-wide"><a href="http://127.0.0.1:8080/">The Go Programming Language</a></div>
<div class="top-heading" id="heading-narrow"><a href="http://127.0.0.1:8080/">Go</a></div>
<a href="index.html#" id="menu-button"><span id="menu-button-arrow">&#9661;</span></a>
<form method="GET" action="http://127.0.0.1:8080/search">
<div id="menu">
<a href="http://127.0.0.1:8080/doc/">Documents</a>
<a href="http://127.0.0.1:8080/pkg/">Packages</a>
<a href="http://127.0.0.1:8080/project/">The Project</a>
<a href="http://127.0.0.1:8080/help/">Help</a>
<a href="http://127.0.0.1:8080/blog/">Blog</a>

<input type="text" id="search" name="q" class="inactive" value="Search" placeholder="Search">
</div>
</form>

</div></div>



<div id="page" class="wide">
<div class="container">


  <h1>Package archive</h1>




<div id="nav"></div>


<!--
	Copyright 2009 The Go Authors. All rights reserved.
	Use of this source code is governed by a BSD-style
	license that can be found in the LICENSE file.
-->
<!--
	Note: Static (i.e., not template-generated) href and id
	attributes start with "pkg-" to make it impossible for
	them to conflict with generated attributes (some of which
	correspond to Go identifiers).
-->

	<script type='text/javascript'>
	document.ANALYSIS_DATA = null;
	document.CALLGRAPH = null;
	</script>

	
		
		<div id="short-nav">
			<dl>
			<dd><code>import "github.com/docker/docker/pkg/archive"</code></dd>
			</dl>
			<dl>
			<dd><a href="index.html#pkg-overview" class="overviewLink">Overview</a></dd>
			<dd><a href="index.html#pkg-index" class="indexLink">Index</a></dd>
			
			
			</dl>
		</div>
		<!-- The package's Name is printed as title by the top-level template -->
		<div id="pkg-overview" class="toggleVisible">
			<div class="collapsed">
				<h2 class="toggleButton" title="Click to show Overview section">Overview ▹</h2>
			</div>
			<div class="expanded">
				<h2 class="toggleButton" title="Click to hide Overview section">Overview ▾</h2>
				
			</div>
		</div>
		

		<div id="pkg-index" class="toggleVisible">
		<div class="collapsed">
			<h2 class="toggleButton" title="Click to show Index section">Index ▹</h2>
		</div>
		<div class="expanded">
			<h2 class="toggleButton" title="Click to hide Index section">Index ▾</h2>

		<!-- Table of contents for API; must be named manual-nav to turn off auto nav. -->
			<div id="manual-nav">
			<dl>
			
				<dd><a href="index.html#pkg-constants">Constants</a></dd>
			
			
				<dd><a href="index.html#pkg-variables">Variables</a></dd>
			
			
				
				<dd><a href="index.html#ApplyLayer">func ApplyLayer(dest string, layer io.Reader) (int64, error)</a></dd>
			
				
				<dd><a href="index.html#ApplyUncompressedLayer">func ApplyUncompressedLayer(dest string, layer io.Reader, options *TarOptions) (int64, error)</a></dd>
			
				
				<dd><a href="index.html#CanonicalTarNameForPath">func CanonicalTarNameForPath(p string) string</a></dd>
			
				
				<dd><a href="index.html#Changes">func Changes(layers []string, rw string) ([]Change, error)</a></dd>
			
				
				<dd><a href="index.html#ChangesDirs">func ChangesDirs(newDir, oldDir string) ([]Change, error)</a></dd>
			
				
				<dd><a href="index.html#ChangesSize">func ChangesSize(newDir string, changes []Change) int64</a></dd>
			
				
				<dd><a href="index.html#CompressStream">func CompressStream(dest io.Writer, compression Compression) (io.WriteCloser, error)</a></dd>
			
				
				<dd><a href="index.html#CopyResource">func CopyResource(srcPath, dstPath string, followLink bool) error</a></dd>
			
				
				<dd><a href="index.html#CopyTo">func CopyTo(content io.Reader, srcInfo CopyInfo, dstPath string) error</a></dd>
			
				
				<dd><a href="index.html#DecompressStream">func DecompressStream(archive io.Reader) (io.ReadCloser, error)</a></dd>
			
				
				<dd><a href="index.html#ExportChanges">func ExportChanges(dir string, changes []Change, uidMaps, gidMaps []idtools.IDMap) (io.ReadCloser, error)</a></dd>
			
				
				<dd><a href="index.html#FileInfoHeader">func FileInfoHeader(name string, fi os.FileInfo, link string) (*tar.Header, error)</a></dd>
			
				
				<dd><a href="index.html#Generate">func Generate(input ...string) (io.Reader, error)</a></dd>
			
				
				<dd><a href="index.html#GetRebaseName">func GetRebaseName(path, resolvedPath string) (string, string)</a></dd>
			
				
				<dd><a href="index.html#IsArchivePath">func IsArchivePath(path string) bool</a></dd>
			
				
				<dd><a href="index.html#PrepareArchiveCopy">func PrepareArchiveCopy(srcContent io.Reader, srcInfo, dstInfo CopyInfo) (dstDir string, content io.ReadCloser, err error)</a></dd>
			
				
				<dd><a href="index.html#PreserveTrailingDotOrSeparator">func PreserveTrailingDotOrSeparator(cleanedPath string, originalPath string, sep byte) string</a></dd>
			
				
				<dd><a href="index.html#ReadSecurityXattrToTarHeader">func ReadSecurityXattrToTarHeader(path string, hdr *tar.Header) error</a></dd>
			
				
				<dd><a href="index.html#RebaseArchiveEntries">func RebaseArchiveEntries(srcContent io.Reader, oldBase, newBase string) io.ReadCloser</a></dd>
			
				
				<dd><a href="index.html#ReplaceFileTarWrapper">func ReplaceFileTarWrapper(inputTarStream io.ReadCloser, mods map[string]TarModifierFunc) io.ReadCloser</a></dd>
			
				
				<dd><a href="index.html#ResolveHostSourcePath">func ResolveHostSourcePath(path string, followLink bool) (resolvedPath, rebaseName string, err error)</a></dd>
			
				
				<dd><a href="index.html#SplitPathDirEntry">func SplitPathDirEntry(path string) (dir, base string)</a></dd>
			
				
				<dd><a href="index.html#Tar">func Tar(path string, compression Compression) (io.ReadCloser, error)</a></dd>
			
				
				<dd><a href="index.html#TarResource">func TarResource(sourceInfo CopyInfo) (content io.ReadCloser, err error)</a></dd>
			
				
				<dd><a href="index.html#TarResourceRebase">func TarResourceRebase(sourcePath, rebaseName string) (content io.ReadCloser, err error)</a></dd>
			
				
				<dd><a href="index.html#TarWithOptions">func TarWithOptions(srcPath string, options *TarOptions) (io.ReadCloser, error)</a></dd>
			
				
				<dd><a href="index.html#Unpack">func Unpack(decompressedArchive io.Reader, dest string, options *TarOptions) error</a></dd>
			
				
				<dd><a href="index.html#UnpackLayer">func UnpackLayer(dest string, layer io.Reader, options *TarOptions) (size int64, err error)</a></dd>
			
				
				<dd><a href="index.html#Untar">func Untar(tarArchive io.Reader, dest string, options *TarOptions) error</a></dd>
			
				
				<dd><a href="index.html#UntarUncompressed">func UntarUncompressed(tarArchive io.Reader, dest string, options *TarOptions) error</a></dd>
			
			
				
				<dd><a href="index.html#Archiver">type Archiver</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#NewDefaultArchiver">func NewDefaultArchiver() *Archiver</a></dd>
				
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#Archiver.CopyFileWithTar">func (archiver *Archiver) CopyFileWithTar(src, dst string) (err error)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#Archiver.CopyWithTar">func (archiver *Archiver) CopyWithTar(src, dst string) error</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#Archiver.IdentityMapping">func (archiver *Archiver) IdentityMapping() *idtools.IdentityMapping</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#Archiver.TarUntar">func (archiver *Archiver) TarUntar(src, dst string) error</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#Archiver.UntarPath">func (archiver *Archiver) UntarPath(src, dst string) error</a></dd>
				
			
				
				<dd><a href="index.html#Change">type Change</a></dd>
				
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#Change.String">func (change *Change) String() string</a></dd>
				
			
				
				<dd><a href="index.html#ChangeType">type ChangeType</a></dd>
				
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#ChangeType.String">func (c ChangeType) String() string</a></dd>
				
			
				
				<dd><a href="index.html#Compression">type Compression</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#DetectCompression">func DetectCompression(source []byte) Compression</a></dd>
				
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#Compression.Extension">func (compression *Compression) Extension() string</a></dd>
				
			
				
				<dd><a href="index.html#CopyInfo">type CopyInfo</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#CopyInfoDestinationPath">func CopyInfoDestinationPath(path string) (info CopyInfo, err error)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#CopyInfoSourcePath">func CopyInfoSourcePath(path string, followLink bool) (CopyInfo, error)</a></dd>
				
				
			
				
				<dd><a href="index.html#FileInfo">type FileInfo</a></dd>
				
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#FileInfo.Changes">func (info *FileInfo) Changes(oldInfo *FileInfo) []Change</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#FileInfo.LookUp">func (info *FileInfo) LookUp(path string) *FileInfo</a></dd>
				
			
				
				<dd><a href="index.html#TarModifierFunc">type TarModifierFunc</a></dd>
				
				
			
				
				<dd><a href="index.html#TarOptions">type TarOptions</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#TarResourceRebaseOpts">func TarResourceRebaseOpts(sourceBase string, rebaseName string) *TarOptions</a></dd>
				
				
			
				
				<dd><a href="index.html#TempArchive">type TempArchive</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#NewTempArchive">func NewTempArchive(src io.Reader, dir string) (*TempArchive, error)</a></dd>
				
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#TempArchive.Close">func (archive *TempArchive) Close() error</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#TempArchive.Read">func (archive *TempArchive) Read(data []byte) (int, error)</a></dd>
				
			
				
				<dd><a href="index.html#WhiteoutFormat">type WhiteoutFormat</a></dd>
				
				
			
			
			</dl>
			</div><!-- #manual-nav -->

		

		
			<h4>Package files</h4>
			<p>
			<span style="font-size:90%">
			
				<a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/archive.go">archive.go</a>
			
				<a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/archive_linux.go">archive_linux.go</a>
			
				<a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/archive_unix.go">archive_unix.go</a>
			
				<a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/changes.go">changes.go</a>
			
				<a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/changes_linux.go">changes_linux.go</a>
			
				<a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/changes_unix.go">changes_unix.go</a>
			
				<a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/copy.go">copy.go</a>
			
				<a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/copy_unix.go">copy_unix.go</a>
			
				<a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/diff.go">diff.go</a>
			
				<a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/time_linux.go">time_linux.go</a>
			
				<a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/whiteouts.go">whiteouts.go</a>
			
				<a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/wrap.go">wrap.go</a>
			
			</span>
			</p>
		
		</div><!-- .expanded -->
		</div><!-- #pkg-index -->

		<div id="pkg-callgraph" class="toggle" style="display: none">
		<div class="collapsed">
			<h2 class="toggleButton" title="Click to show Internal Call Graph section">Internal call graph ▹</h2>
		</div> <!-- .expanded -->
		<div class="expanded">
			<h2 class="toggleButton" title="Click to hide Internal Call Graph section">Internal call graph ▾</h2>
			<p>
			  In the call graph viewer below, each node
			  is a function belonging to this package
			  and its children are the functions it
			  calls&mdash;perhaps dynamically.
			</p>
			<p>
			  The root nodes are the entry points of the
			  package: functions that may be called from
			  outside the package.
			  There may be non-exported or anonymous
			  functions among them if they are called
			  dynamically from another package.
			</p>
			<p>
			  Click a node to visit that function's source code.
			  From there you can visit its callers by
			  clicking its declaring <code>func</code>
			  token.
			</p>
			<p>
			  Functions may be omitted if they were
			  determined to be unreachable in the
			  particular programs or tests that were
			  analyzed.
			</p>
			<!-- Zero means show all package entry points. -->
			<ul style="margin-left: 0.5in" id="callgraph-0" class="treeview"></ul>
		</div>
		</div> <!-- #pkg-callgraph -->

		
			<h2 id="pkg-constants">Constants</h2>
			
				
				<pre>const (
    <span class="comment">// ChangeModify represents the modify operation.</span>
    <span id="ChangeModify">ChangeModify</span> = <a href="http://127.0.0.1:8080/pkg/builtin/#iota">iota</a>
    <span class="comment">// ChangeAdd represents the add operation.</span>
    <span id="ChangeAdd">ChangeAdd</span>
    <span class="comment">// ChangeDelete represents the delete operation.</span>
    <span id="ChangeDelete">ChangeDelete</span>
)</pre>
			
				<p>
WhiteoutLinkDir is a directory AUFS uses for storing hardlink links to other
layers. Normally these should not go into exported archives and all changed
hardlinks should be copied to the top layer.
</p>

				<pre>const <span id="WhiteoutLinkDir">WhiteoutLinkDir</span> = <a href="index.html#WhiteoutMetaPrefix">WhiteoutMetaPrefix</a> + &#34;plnk&#34;</pre>
			
				<p>
WhiteoutMetaPrefix prefix means whiteout has a special meaning and is not
for removing an actual file. Normally these files are excluded from exported
archives.
</p>

				<pre>const <span id="WhiteoutMetaPrefix">WhiteoutMetaPrefix</span> = <a href="index.html#WhiteoutPrefix">WhiteoutPrefix</a> + <a href="index.html#WhiteoutPrefix">WhiteoutPrefix</a></pre>
			
				<p>
WhiteoutOpaqueDir file means directory has been made opaque - meaning
readdir calls to this directory do not follow to lower layers.
</p>

				<pre>const <span id="WhiteoutOpaqueDir">WhiteoutOpaqueDir</span> = <a href="index.html#WhiteoutMetaPrefix">WhiteoutMetaPrefix</a> + &#34;.opq&#34;</pre>
			
				<p>
WhiteoutPrefix prefix means file is a whiteout. If this is followed by a
filename this means that file has been removed from the base layer.
</p>

				<pre>const <span id="WhiteoutPrefix">WhiteoutPrefix</span> = &#34;.wh.&#34;</pre>
			
		
		
			<h2 id="pkg-variables">Variables</h2>
			
				<p>
Errors used or returned by this file.
</p>

				<pre>var (
    <span id="ErrNotDirectory">ErrNotDirectory</span>      = <a href="http://127.0.0.1:8080/pkg/errors/">errors</a>.<a href="http://127.0.0.1:8080/pkg/errors/#New">New</a>(&#34;not a directory&#34;)
    <span id="ErrDirNotExists">ErrDirNotExists</span>      = <a href="http://127.0.0.1:8080/pkg/errors/">errors</a>.<a href="http://127.0.0.1:8080/pkg/errors/#New">New</a>(&#34;no such directory&#34;)
    <span id="ErrCannotCopyDir">ErrCannotCopyDir</span>     = <a href="http://127.0.0.1:8080/pkg/errors/">errors</a>.<a href="http://127.0.0.1:8080/pkg/errors/#New">New</a>(&#34;cannot copy directory&#34;)
    <span id="ErrInvalidCopySource">ErrInvalidCopySource</span> = <a href="http://127.0.0.1:8080/pkg/errors/">errors</a>.<a href="http://127.0.0.1:8080/pkg/errors/#New">New</a>(&#34;invalid copy source content&#34;)
)</pre>
			
		
		
			
			
			<h2 id="ApplyLayer">func <a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/diff.go?s=6954:7014#L216">ApplyLayer</a>
				<a class="permalink" href="index.html#ApplyLayer">&#xb6;</a>
			</h2>
			<pre>func <a href="index.html#ApplyLayer">ApplyLayer</a>(dest <a href="http://127.0.0.1:8080/pkg/builtin/#string">string</a>, layer <a href="http://127.0.0.1:8080/pkg/io/">io</a>.<a href="http://127.0.0.1:8080/pkg/io/#Reader">Reader</a>) (<a href="http://127.0.0.1:8080/pkg/builtin/#int64">int64</a>, <a href="http://127.0.0.1:8080/pkg/builtin/#error">error</a>)</pre>
			<p>
ApplyLayer parses a diff in the standard layer format from `layer`,
and applies it to the directory `dest`. The stream `layer` can be
compressed or uncompressed.
Returns the size in bytes of the contents of the layer.
</p>

			
			

		
			
			
			<h2 id="ApplyUncompressedLayer">func <a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/diff.go?s=7313:7406#L224">ApplyUncompressedLayer</a>
				<a class="permalink" href="index.html#ApplyUncompressedLayer">&#xb6;</a>
			</h2>
			<pre>func <a href="index.html#ApplyUncompressedLayer">ApplyUncompressedLayer</a>(dest <a href="http://127.0.0.1:8080/pkg/builtin/#string">string</a>, layer <a href="http://127.0.0.1:8080/pkg/io/">io</a>.<a href="http://127.0.0.1:8080/pkg/io/#Reader">Reader</a>, options *<a href="index.html#TarOptions">TarOptions</a>) (<a href="http://127.0.0.1:8080/pkg/builtin/#int64">int64</a>, <a href="http://127.0.0.1:8080/pkg/builtin/#error">error</a>)</pre>
			<p>
ApplyUncompressedLayer parses a diff in the standard layer format from
`layer`, and applies it to the directory `dest`. The stream `layer`
can only be uncompressed.
Returns the size in bytes of the contents of the layer.
</p>

			
			

		
			
			
			<h2 id="CanonicalTarNameForPath">func <a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/archive_unix.go?s=1127:1172#L26">CanonicalTarNameForPath</a>
				<a class="permalink" href="index.html#CanonicalTarNameForPath">&#xb6;</a>
			</h2>
			<pre>func <a href="index.html#CanonicalTarNameForPath">CanonicalTarNameForPath</a>(p <a href="http://127.0.0.1:8080/pkg/builtin/#string">string</a>) <a href="http://127.0.0.1:8080/pkg/builtin/#string">string</a></pre>
			<p>
CanonicalTarNameForPath returns platform-specific filepath
to canonical posix-style path for tar archival. p is relative
path.
</p>

			
			

		
			
			
			<h2 id="Changes">func <a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/changes.go?s=2280:2338#L77">Changes</a>
				<a class="permalink" href="index.html#Changes">&#xb6;</a>
			</h2>
			<pre>func <a href="index.html#Changes">Changes</a>(layers []<a href="http://127.0.0.1:8080/pkg/builtin/#string">string</a>, rw <a href="http://127.0.0.1:8080/pkg/builtin/#string">string</a>) ([]<a href="index.html#Change">Change</a>, <a href="http://127.0.0.1:8080/pkg/builtin/#error">error</a>)</pre>
			<p>
Changes walks the path rw and determines changes for the files in the path,
with respect to the parent layers
</p>

			
			

		
			
			
			<h2 id="ChangesDirs">func <a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/changes.go?s=9565:9622#L336">ChangesDirs</a>
				<a class="permalink" href="index.html#ChangesDirs">&#xb6;</a>
			</h2>
			<pre>func <a href="index.html#ChangesDirs">ChangesDirs</a>(newDir, oldDir <a href="http://127.0.0.1:8080/pkg/builtin/#string">string</a>) ([]<a href="index.html#Change">Change</a>, <a href="http://127.0.0.1:8080/pkg/builtin/#error">error</a>)</pre>
			<p>
ChangesDirs compares two directories and generates an array of Change objects describing the changes.
If oldDir is &#34;&#34;, then all files in newDir will be Add-Changes.
</p>

			
			

		
			
			
			<h2 id="ChangesSize">func <a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/changes.go?s=10056:10111#L357">ChangesSize</a>
				<a class="permalink" href="index.html#ChangesSize">&#xb6;</a>
			</h2>
			<pre>func <a href="index.html#ChangesSize">ChangesSize</a>(newDir <a href="http://127.0.0.1:8080/pkg/builtin/#string">string</a>, changes []<a href="index.html#Change">Change</a>) <a href="http://127.0.0.1:8080/pkg/builtin/#int64">int64</a></pre>
			<p>
ChangesSize calculates the size in bytes of the provided changes, based on newDir.
</p>

			
			

		
			
			
			<h2 id="CompressStream">func <a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/archive.go?s=6648:6732#L224">CompressStream</a>
				<a class="permalink" href="index.html#CompressStream">&#xb6;</a>
			</h2>
			<pre>func <a href="index.html#CompressStream">CompressStream</a>(dest <a href="http://127.0.0.1:8080/pkg/io/">io</a>.<a href="http://127.0.0.1:8080/pkg/io/#Writer">Writer</a>, compression <a href="index.html#Compression">Compression</a>) (<a href="http://127.0.0.1:8080/pkg/io/">io</a>.<a href="http://127.0.0.1:8080/pkg/io/#WriteCloser">WriteCloser</a>, <a href="http://127.0.0.1:8080/pkg/builtin/#error">error</a>)</pre>
			<p>
CompressStream compresses the dest with specified compression algorithm.
</p>

			
			

		
			
			
			<h2 id="CopyResource">func <a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/copy.go?s=13355:13420#L363">CopyResource</a>
				<a class="permalink" href="index.html#CopyResource">&#xb6;</a>
			</h2>
			<pre>func <a href="index.html#CopyResource">CopyResource</a>(srcPath, dstPath <a href="http://127.0.0.1:8080/pkg/builtin/#string">string</a>, followLink <a href="http://127.0.0.1:8080/pkg/builtin/#bool">bool</a>) <a href="http://127.0.0.1:8080/pkg/builtin/#error">error</a></pre>
			<p>
CopyResource performs an archive copy from the given source path to the
given destination path. The source path MUST exist and the destination
path&#39;s parent directory must exist.
</p>

			
			

		
			
			
			<h2 id="CopyTo">func <a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/copy.go?s=14141:14211#L392">CopyTo</a>
				<a class="permalink" href="index.html#CopyTo">&#xb6;</a>
			</h2>
			<pre>func <a href="index.html#CopyTo">CopyTo</a>(content <a href="http://127.0.0.1:8080/pkg/io/">io</a>.<a href="http://127.0.0.1:8080/pkg/io/#Reader">Reader</a>, srcInfo <a href="index.html#CopyInfo">CopyInfo</a>, dstPath <a href="http://127.0.0.1:8080/pkg/builtin/#string">string</a>) <a href="http://127.0.0.1:8080/pkg/builtin/#error">error</a></pre>
			<p>
CopyTo handles extracting the given content whose
entries should be sourced from srcInfo to dstPath.
</p>

			
			

		
			
			
			<h2 id="DecompressStream">func <a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/archive.go?s=5086:5149#L175">DecompressStream</a>
				<a class="permalink" href="index.html#DecompressStream">&#xb6;</a>
			</h2>
			<pre>func <a href="index.html#DecompressStream">DecompressStream</a>(archive <a href="http://127.0.0.1:8080/pkg/io/">io</a>.<a href="http://127.0.0.1:8080/pkg/io/#Reader">Reader</a>) (<a href="http://127.0.0.1:8080/pkg/io/">io</a>.<a href="http://127.0.0.1:8080/pkg/io/#ReadCloser">ReadCloser</a>, <a href="http://127.0.0.1:8080/pkg/builtin/#error">error</a>)</pre>
			<p>
DecompressStream decompresses the archive and returns a ReaderCloser with the decompressed archive.
</p>

			
			

		
			
			
			<h2 id="ExportChanges">func <a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/changes.go?s=10805:10910#L388">ExportChanges</a>
				<a class="permalink" href="index.html#ExportChanges">&#xb6;</a>
			</h2>
			<pre>func <a href="index.html#ExportChanges">ExportChanges</a>(dir <a href="http://127.0.0.1:8080/pkg/builtin/#string">string</a>, changes []<a href="index.html#Change">Change</a>, uidMaps, gidMaps []<a href="../idtools/index.html">idtools</a>.<a href="../idtools/index.html#IDMap">IDMap</a>) (<a href="http://127.0.0.1:8080/pkg/io/">io</a>.<a href="http://127.0.0.1:8080/pkg/io/#ReadCloser">ReadCloser</a>, <a href="http://127.0.0.1:8080/pkg/builtin/#error">error</a>)</pre>
			<p>
ExportChanges produces an Archive from the provided changes, relative to dir.
</p>

			
			

		
			
			
			<h2 id="FileInfoHeader">func <a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/archive.go?s=10478:10560#L350">FileInfoHeader</a>
				<a class="permalink" href="index.html#FileInfoHeader">&#xb6;</a>
			</h2>
			<pre>func <a href="index.html#FileInfoHeader">FileInfoHeader</a>(name <a href="http://127.0.0.1:8080/pkg/builtin/#string">string</a>, fi <a href="http://127.0.0.1:8080/pkg/os/">os</a>.<a href="http://127.0.0.1:8080/pkg/os/#FileInfo">FileInfo</a>, link <a href="http://127.0.0.1:8080/pkg/builtin/#string">string</a>) (*<a href="http://127.0.0.1:8080/pkg/archive/tar/">tar</a>.<a href="http://127.0.0.1:8080/pkg/archive/tar/#Header">Header</a>, <a href="http://127.0.0.1:8080/pkg/builtin/#error">error</a>)</pre>
			<p>
FileInfoHeader creates a populated Header from fi.
Compared to archive pkg this function fills in more information.
Also, regardless of Go version, this function fills file type bits (e.g. hdr.Mode |= modeISDIR),
which have been deleted since Go 1.9 archive/tar.
</p>

			
			

		
			
			
			<h2 id="Generate">func <a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/wrap.go?s=675:724#L15">Generate</a>
				<a class="permalink" href="index.html#Generate">&#xb6;</a>
			</h2>
			<pre>func <a href="index.html#Generate">Generate</a>(input ...<a href="http://127.0.0.1:8080/pkg/builtin/#string">string</a>) (<a href="http://127.0.0.1:8080/pkg/io/">io</a>.<a href="http://127.0.0.1:8080/pkg/io/#Reader">Reader</a>, <a href="http://127.0.0.1:8080/pkg/builtin/#error">error</a>)</pre>
			<p>
Generate generates a new archive from the content provided
as input.
</p>
<p>
`files` is a sequence of path/content pairs. A new file is
added to the archive for each pair.
If the last pair is incomplete, the file is created with an
empty content. For example:
</p>
<p>
Generate(&#34;foo.txt&#34;, &#34;hello world&#34;, &#34;emptyfile&#34;)
</p>
<p>
The above call will return an archive with 2 files:
</p>
<pre>* ./foo.txt with content &#34;hello world&#34;
* ./empty with empty content
</pre>
<p>
FIXME: stream content instead of buffering
FIXME: specify permissions and other archive metadata
</p>

			
			

		
			
			
			<h2 id="GetRebaseName">func <a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/copy.go?s=16065:16127#L448">GetRebaseName</a>
				<a class="permalink" href="index.html#GetRebaseName">&#xb6;</a>
			</h2>
			<pre>func <a href="index.html#GetRebaseName">GetRebaseName</a>(path, resolvedPath <a href="http://127.0.0.1:8080/pkg/builtin/#string">string</a>) (<a href="http://127.0.0.1:8080/pkg/builtin/#string">string</a>, <a href="http://127.0.0.1:8080/pkg/builtin/#string">string</a>)</pre>
			<p>
GetRebaseName normalizes and compares path and resolvedPath,
return completed resolved path and rebased file name
</p>

			
			

		
			
			
			<h2 id="IsArchivePath">func <a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/archive.go?s=3413:3449#L110">IsArchivePath</a>
				<a class="permalink" href="index.html#IsArchivePath">&#xb6;</a>
			</h2>
			<pre>func <a href="index.html#IsArchivePath">IsArchivePath</a>(path <a href="http://127.0.0.1:8080/pkg/builtin/#string">string</a>) <a href="http://127.0.0.1:8080/pkg/builtin/#bool">bool</a></pre>
			<p>
IsArchivePath checks if the (possibly compressed) file at the given path
starts with a tar file header.
</p>

			
			

		
			
			
			<h2 id="PrepareArchiveCopy">func <a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/copy.go?s=8545:8667#L239">PrepareArchiveCopy</a>
				<a class="permalink" href="index.html#PrepareArchiveCopy">&#xb6;</a>
			</h2>
			<pre>func <a href="index.html#PrepareArchiveCopy">PrepareArchiveCopy</a>(srcContent <a href="http://127.0.0.1:8080/pkg/io/">io</a>.<a href="http://127.0.0.1:8080/pkg/io/#Reader">Reader</a>, srcInfo, dstInfo <a href="index.html#CopyInfo">CopyInfo</a>) (dstDir <a href="http://127.0.0.1:8080/pkg/builtin/#string">string</a>, content <a href="http://127.0.0.1:8080/pkg/io/">io</a>.<a href="http://127.0.0.1:8080/pkg/io/#ReadCloser">ReadCloser</a>, err <a href="http://127.0.0.1:8080/pkg/builtin/#error">error</a>)</pre>
			<p>
PrepareArchiveCopy prepares the given srcContent archive, which should
contain the archived resource described by srcInfo, to the destination
described by dstInfo. Returns the possibly modified content archive along
with the path to the destination directory which it should be extracted to.
</p>

			
			

		
			
			
			<h2 id="PreserveTrailingDotOrSeparator">func <a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/copy.go?s=1041:1134#L21">PreserveTrailingDotOrSeparator</a>
				<a class="permalink" href="index.html#PreserveTrailingDotOrSeparator">&#xb6;</a>
			</h2>
			<pre>func <a href="index.html#PreserveTrailingDotOrSeparator">PreserveTrailingDotOrSeparator</a>(cleanedPath <a href="http://127.0.0.1:8080/pkg/builtin/#string">string</a>, originalPath <a href="http://127.0.0.1:8080/pkg/builtin/#string">string</a>, sep <a href="http://127.0.0.1:8080/pkg/builtin/#byte">byte</a>) <a href="http://127.0.0.1:8080/pkg/builtin/#string">string</a></pre>
			<p>
PreserveTrailingDotOrSeparator returns the given cleaned path (after
processing using any utility functions from the path or filepath stdlib
packages) and appends a trailing `/.` or `/` if its corresponding  original
path (from before being processed by utility functions from the path or
filepath stdlib packages) ends with a trailing `/.` or `/`. If the cleaned
path already ends in a `.` path segment, then another is not added. If the
clean path already ends in the separator, then another is not added.
</p>

			
			

		
			
			
			<h2 id="ReadSecurityXattrToTarHeader">func <a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/archive.go?s=11714:11783#L394">ReadSecurityXattrToTarHeader</a>
				<a class="permalink" href="index.html#ReadSecurityXattrToTarHeader">&#xb6;</a>
			</h2>
			<pre>func <a href="index.html#ReadSecurityXattrToTarHeader">ReadSecurityXattrToTarHeader</a>(path <a href="http://127.0.0.1:8080/pkg/builtin/#string">string</a>, hdr *<a href="http://127.0.0.1:8080/pkg/archive/tar/">tar</a>.<a href="http://127.0.0.1:8080/pkg/archive/tar/#Header">Header</a>) <a href="http://127.0.0.1:8080/pkg/builtin/#error">error</a></pre>
			<p>
ReadSecurityXattrToTarHeader reads security.capability xattr from filesystem
to a tar header
</p>

			
			

		
			
			
			<h2 id="RebaseArchiveEntries">func <a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/copy.go?s=11534:11620#L302">RebaseArchiveEntries</a>
				<a class="permalink" href="index.html#RebaseArchiveEntries">&#xb6;</a>
			</h2>
			<pre>func <a href="index.html#RebaseArchiveEntries">RebaseArchiveEntries</a>(srcContent <a href="http://127.0.0.1:8080/pkg/io/">io</a>.<a href="http://127.0.0.1:8080/pkg/io/#Reader">Reader</a>, oldBase, newBase <a href="http://127.0.0.1:8080/pkg/builtin/#string">string</a>) <a href="http://127.0.0.1:8080/pkg/io/">io</a>.<a href="http://127.0.0.1:8080/pkg/io/#ReadCloser">ReadCloser</a></pre>
			<p>
RebaseArchiveEntries rewrites the given srcContent archive replacing
an occurrence of oldBase with newBase at the beginning of entry names.
</p>

			
			

		
			
			
			<h2 id="ReplaceFileTarWrapper">func <a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/archive.go?s=8040:8143#L253">ReplaceFileTarWrapper</a>
				<a class="permalink" href="index.html#ReplaceFileTarWrapper">&#xb6;</a>
			</h2>
			<pre>func <a href="index.html#ReplaceFileTarWrapper">ReplaceFileTarWrapper</a>(inputTarStream <a href="http://127.0.0.1:8080/pkg/io/">io</a>.<a href="http://127.0.0.1:8080/pkg/io/#ReadCloser">ReadCloser</a>, mods map[<a href="http://127.0.0.1:8080/pkg/builtin/#string">string</a>]<a href="index.html#TarModifierFunc">TarModifierFunc</a>) <a href="http://127.0.0.1:8080/pkg/io/">io</a>.<a href="http://127.0.0.1:8080/pkg/io/#ReadCloser">ReadCloser</a></pre>
			<p>
ReplaceFileTarWrapper converts inputTarStream to a new tar stream. Files in the
tar stream are modified if they match any of the keys in mods.
</p>

			
			

		
			
			
			<h2 id="ResolveHostSourcePath">func <a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/copy.go?s=15031:15132#L418">ResolveHostSourcePath</a>
				<a class="permalink" href="index.html#ResolveHostSourcePath">&#xb6;</a>
			</h2>
			<pre>func <a href="index.html#ResolveHostSourcePath">ResolveHostSourcePath</a>(path <a href="http://127.0.0.1:8080/pkg/builtin/#string">string</a>, followLink <a href="http://127.0.0.1:8080/pkg/builtin/#bool">bool</a>) (resolvedPath, rebaseName <a href="http://127.0.0.1:8080/pkg/builtin/#string">string</a>, err <a href="http://127.0.0.1:8080/pkg/builtin/#error">error</a>)</pre>
			<p>
ResolveHostSourcePath decides real path need to be copied with parameters such as
whether to follow symbol link or not, if followLink is true, resolvedPath will return
link target of any symbol link file, else it will only resolve symlink of directory
but return symbol link file itself without resolving.
</p>

			
			

		
			
			
			<h2 id="SplitPathDirEntry">func <a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/copy.go?s=2719:2773#L64">SplitPathDirEntry</a>
				<a class="permalink" href="index.html#SplitPathDirEntry">&#xb6;</a>
			</h2>
			<pre>func <a href="index.html#SplitPathDirEntry">SplitPathDirEntry</a>(path <a href="http://127.0.0.1:8080/pkg/builtin/#string">string</a>) (dir, base <a href="http://127.0.0.1:8080/pkg/builtin/#string">string</a>)</pre>
			<p>
SplitPathDirEntry splits the given path between its directory name and its
basename by first cleaning the path but preserves a trailing &#34;.&#34; if the
original path specified the current directory.
</p>

			
			

		
			
			
			<h2 id="Tar">func <a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/archive.go?s=21170:21239#L708">Tar</a>
				<a class="permalink" href="index.html#Tar">&#xb6;</a>
			</h2>
			<pre>func <a href="index.html#Tar">Tar</a>(path <a href="http://127.0.0.1:8080/pkg/builtin/#string">string</a>, compression <a href="index.html#Compression">Compression</a>) (<a href="http://127.0.0.1:8080/pkg/io/">io</a>.<a href="http://127.0.0.1:8080/pkg/io/#ReadCloser">ReadCloser</a>, <a href="http://127.0.0.1:8080/pkg/builtin/#error">error</a>)</pre>
			<p>
Tar creates an archive from the directory at `path`, and returns it as a
stream of bytes.
</p>

			
			

		
			
			
			<h2 id="TarResource">func <a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/copy.go?s=3417:3489#L81">TarResource</a>
				<a class="permalink" href="index.html#TarResource">&#xb6;</a>
			</h2>
			<pre>func <a href="index.html#TarResource">TarResource</a>(sourceInfo <a href="index.html#CopyInfo">CopyInfo</a>) (content <a href="http://127.0.0.1:8080/pkg/io/">io</a>.<a href="http://127.0.0.1:8080/pkg/io/#ReadCloser">ReadCloser</a>, err <a href="http://127.0.0.1:8080/pkg/builtin/#error">error</a>)</pre>
			<p>
TarResource archives the resource described by the given CopyInfo to a Tar
archive. A non-nil error is returned if sourcePath does not exist or is
asserted to be a directory but exists as another type of file.
</p>
<p>
This function acts as a convenient wrapper around TarWithOptions, which
requires a directory as the source path. TarResource accepts either a
directory or a file path and correctly sets the Tar options.
</p>

			
			

		
			
			
			<h2 id="TarResourceRebase">func <a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/copy.go?s=3719:3807#L87">TarResourceRebase</a>
				<a class="permalink" href="index.html#TarResourceRebase">&#xb6;</a>
			</h2>
			<pre>func <a href="index.html#TarResourceRebase">TarResourceRebase</a>(sourcePath, rebaseName <a href="http://127.0.0.1:8080/pkg/builtin/#string">string</a>) (content <a href="http://127.0.0.1:8080/pkg/io/">io</a>.<a href="http://127.0.0.1:8080/pkg/io/#ReadCloser">ReadCloser</a>, err <a href="http://127.0.0.1:8080/pkg/builtin/#error">error</a>)</pre>
			<p>
TarResourceRebase is like TarResource but renames the first path element of
items in the resulting tar archive to match the given rebaseName if not &#34;&#34;.
</p>

			
			

		
			
			
			<h2 id="TarWithOptions">func <a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/archive.go?s=21514:21593#L714">TarWithOptions</a>
				<a class="permalink" href="index.html#TarWithOptions">&#xb6;</a>
			</h2>
			<pre>func <a href="index.html#TarWithOptions">TarWithOptions</a>(srcPath <a href="http://127.0.0.1:8080/pkg/builtin/#string">string</a>, options *<a href="index.html#TarOptions">TarOptions</a>) (<a href="http://127.0.0.1:8080/pkg/io/">io</a>.<a href="http://127.0.0.1:8080/pkg/io/#ReadCloser">ReadCloser</a>, <a href="http://127.0.0.1:8080/pkg/builtin/#error">error</a>)</pre>
			<p>
TarWithOptions creates an archive from the directory at `path`, only including files whose relative
paths are included in `options.IncludeFiles` (if non-nil) or not in `options.ExcludePatterns`.
</p>

			
			

		
			
			
			<h2 id="Unpack">func <a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/archive.go?s=26629:26711#L888">Unpack</a>
				<a class="permalink" href="index.html#Unpack">&#xb6;</a>
			</h2>
			<pre>func <a href="index.html#Unpack">Unpack</a>(decompressedArchive <a href="http://127.0.0.1:8080/pkg/io/">io</a>.<a href="http://127.0.0.1:8080/pkg/io/#Reader">Reader</a>, dest <a href="http://127.0.0.1:8080/pkg/builtin/#string">string</a>, options *<a href="index.html#TarOptions">TarOptions</a>) <a href="http://127.0.0.1:8080/pkg/builtin/#error">error</a></pre>
			<p>
Unpack unpacks the decompressedArchive to dest with options.
</p>

			
			

		
			
			
			<h2 id="UnpackLayer">func <a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/diff.go?s=471:562#L12">UnpackLayer</a>
				<a class="permalink" href="index.html#UnpackLayer">&#xb6;</a>
			</h2>
			<pre>func <a href="index.html#UnpackLayer">UnpackLayer</a>(dest <a href="http://127.0.0.1:8080/pkg/builtin/#string">string</a>, layer <a href="http://127.0.0.1:8080/pkg/io/">io</a>.<a href="http://127.0.0.1:8080/pkg/io/#Reader">Reader</a>, options *<a href="index.html#TarOptions">TarOptions</a>) (size <a href="http://127.0.0.1:8080/pkg/builtin/#int64">int64</a>, err <a href="http://127.0.0.1:8080/pkg/builtin/#error">error</a>)</pre>
			<p>
UnpackLayer unpack `layer` to a `dest`. The stream `layer` can be
compressed or uncompressed.
Returns the size in bytes of the contents of the layer.
</p>

			
			

		
			
			
			<h2 id="Untar">func <a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/archive.go?s=30673:30745#L1014">Untar</a>
				<a class="permalink" href="index.html#Untar">&#xb6;</a>
			</h2>
			<pre>func <a href="index.html#Untar">Untar</a>(tarArchive <a href="http://127.0.0.1:8080/pkg/io/">io</a>.<a href="http://127.0.0.1:8080/pkg/io/#Reader">Reader</a>, dest <a href="http://127.0.0.1:8080/pkg/builtin/#string">string</a>, options *<a href="index.html#TarOptions">TarOptions</a>) <a href="http://127.0.0.1:8080/pkg/builtin/#error">error</a></pre>
			<p>
Untar reads a stream of bytes from `archive`, parses it as a tar archive,
and unpacks it into the directory at `dest`.
The archive may be compressed with one of the following algorithms:
</p>
<pre>identity (uncompressed), gzip, bzip2, xz.
</pre>
<p>
FIXME: specify behavior when target path exists vs. doesn&#39;t exist.
</p>

			
			

		
			
			
			<h2 id="UntarUncompressed">func <a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/archive.go?s=30989:31073#L1021">UntarUncompressed</a>
				<a class="permalink" href="index.html#UntarUncompressed">&#xb6;</a>
			</h2>
			<pre>func <a href="index.html#UntarUncompressed">UntarUncompressed</a>(tarArchive <a href="http://127.0.0.1:8080/pkg/io/">io</a>.<a href="http://127.0.0.1:8080/pkg/io/#Reader">Reader</a>, dest <a href="http://127.0.0.1:8080/pkg/builtin/#string">string</a>, options *<a href="index.html#TarOptions">TarOptions</a>) <a href="http://127.0.0.1:8080/pkg/builtin/#error">error</a></pre>
			<p>
UntarUncompressed reads a stream of bytes from `archive`, parses it as a tar archive,
and unpacks it into the directory at `dest`.
The archive must be an uncompressed stream.
</p>

			
			

		
		
			
			
			<h2 id="Archiver">type <a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/archive.go?s=2075:2189#L64">Archiver</a>
				<a class="permalink" href="index.html#Archiver">&#xb6;</a>
			</h2>
			<p>
Archiver implements the Archiver interface and allows the reuse of most utility functions of
this package with a pluggable Untar function. Also, to facilitate the passing of specific id
mappings for untar, an Archiver can be created with maps which will then be passed to Untar operations.
</p>

			<pre>type Archiver struct {
<span id="Archiver.Untar"></span>    Untar     func(<a href="http://127.0.0.1:8080/pkg/io/">io</a>.<a href="http://127.0.0.1:8080/pkg/io/#Reader">Reader</a>, <a href="http://127.0.0.1:8080/pkg/builtin/#string">string</a>, *<a href="index.html#TarOptions">TarOptions</a>) <a href="http://127.0.0.1:8080/pkg/builtin/#error">error</a>
<span id="Archiver.IDMapping"></span>    IDMapping *<a href="../idtools/index.html">idtools</a>.<a href="../idtools/index.html#IdentityMapping">IdentityMapping</a>
}</pre>

			

			

			
			
			

			
				
				<h3 id="NewDefaultArchiver">func <a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/archive.go?s=2264:2299#L70">NewDefaultArchiver</a>
					<a class="permalink" href="index.html#NewDefaultArchiver">&#xb6;</a>
				</h3>
				<pre>func <a href="index.html#NewDefaultArchiver">NewDefaultArchiver</a>() *<a href="index.html#Archiver">Archiver</a></pre>
				<p>
NewDefaultArchiver returns a new Archiver without any IdentityMapping
</p>

				
				
			

			
				
				<h3 id="Archiver.CopyFileWithTar">func (*Archiver) <a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/archive.go?s=33734:33804#L1110">CopyFileWithTar</a>
					<a class="permalink" href="index.html#Archiver.CopyFileWithTar">&#xb6;</a>
				</h3>
				<pre>func (archiver *<a href="index.html#Archiver">Archiver</a>) <a href="index.html#CopyFileWithTar">CopyFileWithTar</a>(src, dst <a href="http://127.0.0.1:8080/pkg/builtin/#string">string</a>) (err <a href="http://127.0.0.1:8080/pkg/builtin/#error">error</a>)</pre>
				<p>
CopyFileWithTar emulates the behavior of the &#39;cp&#39; command-line
for a single file. It copies a regular file from path `src` to
path `dst`, and preserves all its metadata.
</p>

				
				
				
			
				
				<h3 id="Archiver.CopyWithTar">func (*Archiver) <a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/archive.go?s=32897:32957#L1085">CopyWithTar</a>
					<a class="permalink" href="index.html#Archiver.CopyWithTar">&#xb6;</a>
				</h3>
				<pre>func (archiver *<a href="index.html#Archiver">Archiver</a>) <a href="index.html#CopyWithTar">CopyWithTar</a>(src, dst <a href="http://127.0.0.1:8080/pkg/builtin/#string">string</a>) <a href="http://127.0.0.1:8080/pkg/builtin/#error">error</a></pre>
				<p>
CopyWithTar creates a tar archive of filesystem path `src`, and
unpacks it at filesystem path `dst`.
The archive is streamed directly with fixed buffering and no
intermediary disk IO.
</p>

				
				
				
			
				
				<h3 id="Archiver.IdentityMapping">func (*Archiver) <a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/archive.go?s=35394:35462#L1186">IdentityMapping</a>
					<a class="permalink" href="index.html#Archiver.IdentityMapping">&#xb6;</a>
				</h3>
				<pre>func (archiver *<a href="index.html#Archiver">Archiver</a>) <a href="index.html#IdentityMapping">IdentityMapping</a>() *<a href="../idtools/index.html">idtools</a>.<a href="../idtools/index.html#IdentityMapping">IdentityMapping</a></pre>
				<p>
IdentityMapping returns the IdentityMapping of the archiver.
</p>

				
				
				
			
				
				<h3 id="Archiver.TarUntar">func (*Archiver) <a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/archive.go?s=31924:31981#L1053">TarUntar</a>
					<a class="permalink" href="index.html#Archiver.TarUntar">&#xb6;</a>
				</h3>
				<pre>func (archiver *<a href="index.html#Archiver">Archiver</a>) <a href="index.html#TarUntar">TarUntar</a>(src, dst <a href="http://127.0.0.1:8080/pkg/builtin/#string">string</a>) <a href="http://127.0.0.1:8080/pkg/builtin/#error">error</a></pre>
				<p>
TarUntar is a convenience function which calls Tar and Untar, with the output of one piped into the other.
If either Tar or Untar fails, TarUntar aborts and returns the error.
</p>

				
				
				
			
				
				<h3 id="Archiver.UntarPath">func (*Archiver) <a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/archive.go?s=32401:32459#L1068">UntarPath</a>
					<a class="permalink" href="index.html#Archiver.UntarPath">&#xb6;</a>
				</h3>
				<pre>func (archiver *<a href="index.html#Archiver">Archiver</a>) <a href="index.html#UntarPath">UntarPath</a>(src, dst <a href="http://127.0.0.1:8080/pkg/builtin/#string">string</a>) <a href="http://127.0.0.1:8080/pkg/builtin/#error">error</a></pre>
				<p>
UntarPath untar a file from path to a destination, src is the source tar file path.
</p>

				
				
				
			
		
			
			
			<h2 id="Change">type <a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/changes.go?s=985:1037#L40">Change</a>
				<a class="permalink" href="index.html#Change">&#xb6;</a>
			</h2>
			<p>
Change represents a change, it wraps the change type and path.
It describes changes of the files in the path respect to the
parent layers. The change could be modify, add, delete.
This is used for layer diff.
</p>

			<pre>type Change struct {
<span id="Change.Path"></span>    Path <a href="http://127.0.0.1:8080/pkg/builtin/#string">string</a>
<span id="Change.Kind"></span>    Kind <a href="index.html#ChangeType">ChangeType</a>
}</pre>

			

			

			
			
			

			

			
				
				<h3 id="Change.String">func (*Change) <a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/changes.go?s=1039:1076#L45">String</a>
					<a class="permalink" href="index.html#Change.String">&#xb6;</a>
				</h3>
				<pre>func (change *<a href="index.html#Change">Change</a>) <a href="index.html#String">String</a>() <a href="http://127.0.0.1:8080/pkg/builtin/#string">string</a></pre>
				
				
				
				
			
		
			
			
			<h2 id="ChangeType">type <a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/changes.go?s=379:398#L13">ChangeType</a>
				<a class="permalink" href="index.html#ChangeType">&#xb6;</a>
			</h2>
			<p>
ChangeType represents the change type.
</p>

			<pre>type ChangeType <a href="http://127.0.0.1:8080/pkg/builtin/#int">int</a></pre>

			

			

			
			
			

			

			
				
				<h3 id="ChangeType.String">func (ChangeType) <a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/changes.go?s=601:636#L24">String</a>
					<a class="permalink" href="index.html#ChangeType.String">&#xb6;</a>
				</h3>
				<pre>func (c <a href="index.html#ChangeType">ChangeType</a>) <a href="index.html#String">String</a>() <a href="http://127.0.0.1:8080/pkg/builtin/#string">string</a></pre>
				
				
				
				
			
		
			
			
			<h2 id="Compression">type <a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/archive.go?s=842:857#L33">Compression</a>
				<a class="permalink" href="index.html#Compression">&#xb6;</a>
			</h2>
			<p>
Compression is the state represents if compressed or not.
</p>

			<pre>type Compression <a href="http://127.0.0.1:8080/pkg/builtin/#int">int</a></pre>

			
				
				<pre>const (
    <span class="comment">// Uncompressed represents the uncompressed.</span>
    <span id="Uncompressed">Uncompressed</span> <a href="index.html#Compression">Compression</a> = <a href="http://127.0.0.1:8080/pkg/builtin/#iota">iota</a>
    <span class="comment">// Bzip2 is bzip2 compression algorithm.</span>
    <span id="Bzip2">Bzip2</span>
    <span class="comment">// Gzip is gzip compression algorithm.</span>
    <span id="Gzip">Gzip</span>
    <span class="comment">// Xz is xz compression algorithm.</span>
    <span id="Xz">Xz</span>
)</pre>
			

			

			
			
			

			
				
				<h3 id="DetectCompression">func <a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/archive.go?s=3761:3810#L127">DetectCompression</a>
					<a class="permalink" href="index.html#DetectCompression">&#xb6;</a>
				</h3>
				<pre>func <a href="index.html#DetectCompression">DetectCompression</a>(source []<a href="http://127.0.0.1:8080/pkg/builtin/#byte">byte</a>) <a href="index.html#Compression">Compression</a></pre>
				<p>
DetectCompression detects the compression algorithm of the source.
</p>

				
				
			

			
				
				<h3 id="Compression.Extension">func (*Compression) <a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/archive.go?s=9985:10035#L332">Extension</a>
					<a class="permalink" href="index.html#Compression.Extension">&#xb6;</a>
				</h3>
				<pre>func (compression *<a href="index.html#Compression">Compression</a>) <a href="index.html#Extension">Extension</a>() <a href="http://127.0.0.1:8080/pkg/builtin/#string">string</a></pre>
				<p>
Extension returns the extension of a file that uses the specified compression algorithm.
</p>

				
				
				
			
		
			
			
			<h2 id="CopyInfo">type <a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/copy.go?s=4920:5016#L121">CopyInfo</a>
				<a class="permalink" href="index.html#CopyInfo">&#xb6;</a>
			</h2>
			<p>
CopyInfo holds basic info about the source
or destination path of a copy operation.
</p>

			<pre>type CopyInfo struct {
<span id="CopyInfo.Path"></span>    Path       <a href="http://127.0.0.1:8080/pkg/builtin/#string">string</a>
<span id="CopyInfo.Exists"></span>    Exists     <a href="http://127.0.0.1:8080/pkg/builtin/#bool">bool</a>
<span id="CopyInfo.IsDir"></span>    IsDir      <a href="http://127.0.0.1:8080/pkg/builtin/#bool">bool</a>
<span id="CopyInfo.RebaseName"></span>    RebaseName <a href="http://127.0.0.1:8080/pkg/builtin/#string">string</a>
}</pre>

			

			

			
			
			

			
				
				<h3 id="CopyInfoDestinationPath">func <a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/copy.go?s=6163:6231#L160">CopyInfoDestinationPath</a>
					<a class="permalink" href="index.html#CopyInfoDestinationPath">&#xb6;</a>
				</h3>
				<pre>func <a href="index.html#CopyInfoDestinationPath">CopyInfoDestinationPath</a>(path <a href="http://127.0.0.1:8080/pkg/builtin/#string">string</a>) (info <a href="index.html#CopyInfo">CopyInfo</a>, err <a href="http://127.0.0.1:8080/pkg/builtin/#error">error</a>)</pre>
				<p>
CopyInfoDestinationPath stats the given path to create a CopyInfo
struct representing that resource for the destination of an archive copy
operation. The given path should be an absolute local path.
</p>

				
				
			
				
				<h3 id="CopyInfoSourcePath">func <a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/copy.go?s=5372:5443#L133">CopyInfoSourcePath</a>
					<a class="permalink" href="index.html#CopyInfoSourcePath">&#xb6;</a>
				</h3>
				<pre>func <a href="index.html#CopyInfoSourcePath">CopyInfoSourcePath</a>(path <a href="http://127.0.0.1:8080/pkg/builtin/#string">string</a>, followLink <a href="http://127.0.0.1:8080/pkg/builtin/#bool">bool</a>) (<a href="index.html#CopyInfo">CopyInfo</a>, <a href="http://127.0.0.1:8080/pkg/builtin/#error">error</a>)</pre>
				<p>
CopyInfoSourcePath stats the given path to create a CopyInfo
struct representing that resource for the source of an archive copy
operation. The given path should be an absolute local path. A source path
has all symlinks evaluated that appear before the last path separator (&#34;/&#34;
on Unix). As it is to be a copy source, the path must exist.
</p>

				
				
			

			
		
			
			
			<h2 id="FileInfo">type <a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/changes.go?s=5672:5832#L201">FileInfo</a>
				<a class="permalink" href="index.html#FileInfo">&#xb6;</a>
			</h2>
			<p>
FileInfo describes the information of a file.
</p>

			<pre>type FileInfo struct {
    <span class="comment">// contains filtered or unexported fields</span>
}</pre>

			

			

			
			
			

			

			
				
				<h3 id="FileInfo.Changes">func (*FileInfo) <a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/changes.go?s=9038:9095#L317">Changes</a>
					<a class="permalink" href="index.html#FileInfo.Changes">&#xb6;</a>
				</h3>
				<pre>func (info *<a href="index.html#FileInfo">FileInfo</a>) <a href="index.html#Changes">Changes</a>(oldInfo *<a href="index.html#FileInfo">FileInfo</a>) []<a href="index.html#Change">Change</a></pre>
				<p>
Changes add changes to file information.
</p>

				
				
				
			
				
				<h3 id="FileInfo.LookUp">func (*FileInfo) <a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/changes.go?s=5885:5936#L211">LookUp</a>
					<a class="permalink" href="index.html#FileInfo.LookUp">&#xb6;</a>
				</h3>
				<pre>func (info *<a href="index.html#FileInfo">FileInfo</a>) <a href="index.html#LookUp">LookUp</a>(path <a href="http://127.0.0.1:8080/pkg/builtin/#string">string</a>) *<a href="index.html#FileInfo">FileInfo</a></pre>
				<p>
LookUp looks up the file information of a file.
</p>

				
				
				
			
		
			
			
			<h2 id="TarModifierFunc">type <a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/archive.go?s=7783:7889#L249">TarModifierFunc</a>
				<a class="permalink" href="index.html#TarModifierFunc">&#xb6;</a>
			</h2>
			<p>
TarModifierFunc is a function that can be passed to ReplaceFileTarWrapper to
modify the contents or header of an entry in the archive. If the file already
exists in the archive the TarModifierFunc will be called with the Header and
a reader which will return the files content. If the file does not exist both
header and content will be nil.
</p>

			<pre>type TarModifierFunc func(path <a href="http://127.0.0.1:8080/pkg/builtin/#string">string</a>, header *<a href="http://127.0.0.1:8080/pkg/archive/tar/">tar</a>.<a href="http://127.0.0.1:8080/pkg/archive/tar/#Header">Header</a>, content <a href="http://127.0.0.1:8080/pkg/io/">io</a>.<a href="http://127.0.0.1:8080/pkg/io/#Reader">Reader</a>) (*<a href="http://127.0.0.1:8080/pkg/archive/tar/">tar</a>.<a href="http://127.0.0.1:8080/pkg/archive/tar/#Header">Header</a>, []<a href="http://127.0.0.1:8080/pkg/builtin/#byte">byte</a>, <a href="http://127.0.0.1:8080/pkg/builtin/#error">error</a>)</pre>

			

			

			
			
			

			

			
		
			
			
			<h2 id="TarOptions">type <a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/archive.go?s=973:1772#L38">TarOptions</a>
				<a class="permalink" href="index.html#TarOptions">&#xb6;</a>
			</h2>
			<p>
TarOptions wraps the tar options.
</p>

			<pre>type TarOptions struct {
<span id="TarOptions.IncludeFiles"></span>    IncludeFiles     []<a href="http://127.0.0.1:8080/pkg/builtin/#string">string</a>
<span id="TarOptions.ExcludePatterns"></span>    ExcludePatterns  []<a href="http://127.0.0.1:8080/pkg/builtin/#string">string</a>
<span id="TarOptions.Compression"></span>    Compression      <a href="index.html#Compression">Compression</a>
<span id="TarOptions.NoLchown"></span>    NoLchown         <a href="http://127.0.0.1:8080/pkg/builtin/#bool">bool</a>
<span id="TarOptions.UIDMaps"></span>    UIDMaps          []<a href="../idtools/index.html">idtools</a>.<a href="../idtools/index.html#IDMap">IDMap</a>
<span id="TarOptions.GIDMaps"></span>    GIDMaps          []<a href="../idtools/index.html">idtools</a>.<a href="../idtools/index.html#IDMap">IDMap</a>
<span id="TarOptions.ChownOpts"></span>    ChownOpts        *<a href="../idtools/index.html">idtools</a>.<a href="../idtools/index.html#Identity">Identity</a>
<span id="TarOptions.IncludeSourceDir"></span>    IncludeSourceDir <a href="http://127.0.0.1:8080/pkg/builtin/#bool">bool</a>
<span id="TarOptions.WhiteoutFormat"></span>    <span class="comment">// WhiteoutFormat is the expected on disk format for whiteout files.</span>
    <span class="comment">// This format will be converted to the standard format on pack</span>
    <span class="comment">// and from the standard format on unpack.</span>
    WhiteoutFormat <a href="index.html#WhiteoutFormat">WhiteoutFormat</a>
    <span class="comment">// When unpacking, specifies whether overwriting a directory with a</span>
    <span class="comment">// non-directory is allowed and vice versa.</span>
<span id="TarOptions.NoOverwriteDirNonDir"></span>    NoOverwriteDirNonDir <a href="http://127.0.0.1:8080/pkg/builtin/#bool">bool</a>
    <span class="comment">// For each include when creating an archive, the included name will be</span>
    <span class="comment">// replaced with the matching name from this map.</span>
<span id="TarOptions.RebaseNames"></span>    RebaseNames map[<a href="http://127.0.0.1:8080/pkg/builtin/#string">string</a>]<a href="http://127.0.0.1:8080/pkg/builtin/#string">string</a>
<span id="TarOptions.InUserNS"></span>    InUserNS    <a href="http://127.0.0.1:8080/pkg/builtin/#bool">bool</a>
}</pre>

			

			

			
			
			

			
				
				<h3 id="TarResourceRebaseOpts">func <a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/copy.go?s=4538:4614#L107">TarResourceRebaseOpts</a>
					<a class="permalink" href="index.html#TarResourceRebaseOpts">&#xb6;</a>
				</h3>
				<pre>func <a href="index.html#TarResourceRebaseOpts">TarResourceRebaseOpts</a>(sourceBase <a href="http://127.0.0.1:8080/pkg/builtin/#string">string</a>, rebaseName <a href="http://127.0.0.1:8080/pkg/builtin/#string">string</a>) *<a href="index.html#TarOptions">TarOptions</a></pre>
				<p>
TarResourceRebaseOpts does not preform the Tar, but instead just creates the rebase
parameters to be sent to TarWithOptions (the TarOptions struct)
</p>

				
				
			

			
		
			
			
			<h2 id="TempArchive">type <a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/archive.go?s=37151:37281#L1247">TempArchive</a>
				<a class="permalink" href="index.html#TempArchive">&#xb6;</a>
			</h2>
			<p>
TempArchive is a temporary archive. The archive can only be read once - as soon as reading completes,
the file will be deleted.
</p>

			<pre>type TempArchive struct {
    *<a href="http://127.0.0.1:8080/pkg/os/">os</a>.<a href="http://127.0.0.1:8080/pkg/os/#File">File</a>
<span id="TempArchive.Size"></span>    Size <a href="http://127.0.0.1:8080/pkg/builtin/#int64">int64</a> <span class="comment">// Pre-computed from Stat().Size() as a convenience</span>
    <span class="comment">// contains filtered or unexported fields</span>
}</pre>

			

			

			
			
			

			
				
				<h3 id="NewTempArchive">func <a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/archive.go?s=36617:36685#L1226">NewTempArchive</a>
					<a class="permalink" href="index.html#NewTempArchive">&#xb6;</a>
				</h3>
				<pre>func <a href="index.html#NewTempArchive">NewTempArchive</a>(src <a href="http://127.0.0.1:8080/pkg/io/">io</a>.<a href="http://127.0.0.1:8080/pkg/io/#Reader">Reader</a>, dir <a href="http://127.0.0.1:8080/pkg/builtin/#string">string</a>) (*<a href="index.html#TempArchive">TempArchive</a>, <a href="http://127.0.0.1:8080/pkg/builtin/#error">error</a>)</pre>
				<p>
NewTempArchive reads the content of src into a temporary file, and returns the contents
of that file as an archive. The archive can only be read once - as soon as reading completes,
the file will be deleted.
</p>

				
				
			

			
				
				<h3 id="TempArchive.Close">func (*TempArchive) <a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/archive.go?s=37430:37471#L1256">Close</a>
					<a class="permalink" href="index.html#TempArchive.Close">&#xb6;</a>
				</h3>
				<pre>func (archive *<a href="index.html#TempArchive">TempArchive</a>) <a href="index.html#Close">Close</a>() <a href="http://127.0.0.1:8080/pkg/builtin/#error">error</a></pre>
				<p>
Close closes the underlying file if it&#39;s still open, or does a no-op
to allow callers to try to close the TempArchive multiple times safely.
</p>

				
				
				
			
				
				<h3 id="TempArchive.Read">func (*TempArchive) <a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/archive.go?s=37568:37626#L1266">Read</a>
					<a class="permalink" href="index.html#TempArchive.Read">&#xb6;</a>
				</h3>
				<pre>func (archive *<a href="index.html#TempArchive">TempArchive</a>) <a href="index.html#Read">Read</a>(data []<a href="http://127.0.0.1:8080/pkg/builtin/#byte">byte</a>) (<a href="http://127.0.0.1:8080/pkg/builtin/#int">int</a>, <a href="http://127.0.0.1:8080/pkg/builtin/#error">error</a>)</pre>
				
				
				
				
			
		
			
			
			<h2 id="WhiteoutFormat">type <a href="http://127.0.0.1:8080/src/github.com/docker/docker/pkg/archive/archive.go?s=914:932#L35">WhiteoutFormat</a>
				<a class="permalink" href="index.html#WhiteoutFormat">&#xb6;</a>
			</h2>
			<p>
WhiteoutFormat is the format of whiteouts unpacked
</p>

			<pre>type WhiteoutFormat <a href="http://127.0.0.1:8080/pkg/builtin/#int">int</a></pre>

			
				
				<pre>const (
    <span class="comment">// AUFSWhiteoutFormat is the default format for whiteouts</span>
    <span id="AUFSWhiteoutFormat">AUFSWhiteoutFormat</span> <a href="index.html#WhiteoutFormat">WhiteoutFormat</a> = <a href="http://127.0.0.1:8080/pkg/builtin/#iota">iota</a>
    <span class="comment">// OverlayWhiteoutFormat formats whiteout according to the overlay</span>
    <span class="comment">// standard.</span>
    <span id="OverlayWhiteoutFormat">OverlayWhiteoutFormat</span>
)</pre>
			

			

			
			
			

			

			
		
	

	







<div id="footer">
Build version go1.8.<br>
Except as <a href="https://developers.google.com/site-policies#restrictions">noted</a>,
the content of this page is licensed under the
Creative Commons Attribution 3.0 License,
and code is licensed under a <a href="http://127.0.0.1:8080/LICENSE">BSD license</a>.<br>
<a href="http://127.0.0.1:8080/doc/tos.html">Terms of Service</a> | 
<a href="http://www.google.com/intl/en/policies/privacy/">Privacy Policy</a>
</div>

</div><!-- .container -->
</div><!-- #page -->

<!-- TODO(adonovan): load these from <head> using "defer" attribute? -->
<script type="text/javascript" src="../../../../../../lib/godoc/jquery.js"></script>
<script type="text/javascript" src="../../../../../../lib/godoc/jquery.treeview.js"></script>
<script type="text/javascript" src="../../../../../../lib/godoc/jquery.treeview.edit.js"></script>


<script>var goVersion = "go1.8";</script>
<script type="text/javascript" src="../../../../../../lib/godoc/godocs.js"></script>

</body>
</html>

